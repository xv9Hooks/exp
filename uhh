-- DarkLib v1.0 - Professional Mobile-Supported Roblox UI Library
-- Features: Dark theme, Opaque, Mobile optimized, Fluent-like design

local DarkLib = {
    Version = "1.0.0",
    Themes = {
        Dark = {
            Primary = Color3.fromRGB(30, 30, 30),
            Secondary = Color3.fromRGB(40, 40, 40),
            Accent = Color3.fromRGB(0, 150, 255),
            Text = Color3.fromRGB(220, 220, 220),
            SubText = Color3.fromRGB(150, 150, 150),
            Border = Color3.fromRGB(60, 60, 60),
            Hover = Color3.fromRGB(50, 50, 50),
            Success = Color3.fromRGB(0, 255, 127),
            Warning = Color3.fromRGB(255, 165, 0),
            Error = Color3.fromRGB(255, 69, 58)
        }
    }
}

-- Services
local Players = game:GetService("Players")
local UIS = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local HttpService = game:GetService("HttpService")
local TextService = game:GetService("TextService")
local RunService = game:GetService("RunService")

-- Local player
local LocalPlayer = Players.LocalPlayer
local Mouse = LocalPlayer:GetMouse()

-- Utility functions
local function Create(class, props)
    local obj = Instance.new(class)
    for prop, val in pairs(props or {}) do
        if prop ~= "Parent" then
            obj[prop] = val
        end
    end
    if props.Parent then obj.Parent = props.Parent end
    return obj
end

local function Tween(obj, properties, duration, style, direction)
    style = style or Enum.EasingStyle.Quad
    direction = direction or Enum.EasingDirection.Out
    local tweenInfo = TweenInfo.new(duration, style, direction)
    local tween = TweenService:Create(obj, tweenInfo, properties)
    tween:Play()
    return tween
end

local function GetTextSize(text, fontSize, font, frameSize)
    return TextService:GetTextSize(text, fontSize, font, frameSize)
end

local function IsMobile()
    return UIS.TouchEnabled and not UIS.MouseEnabled
end

-- Mobile input handler
local MobileInput = {}
if IsMobile() then
    MobileInput.PanEnabled = true
    MobileInput.PinchEnabled = true
end

-- Main Window
function DarkLib:CreateWindow(options)
    options = options or {}
    local config = {
        Title = options.Title or "DarkLib v" .. self.Version,
        SubTitle = options.SubTitle or "",
        Size = options.Size or UDim2.fromOffset(600, 400),
        Position = options.Position or UDim2.fromScale(0.5, 0.5),
        Theme = options.Theme or "Dark",
        MinimizeKey = options.MinimizeKey or Enum.KeyCode.LeftControl,
        Acrylic = options.Acrylic or false, -- Always false for opaque
        TabWidth = options.TabWidth or 140,
        MobileTabWidth = options.MobileTabWidth or 80
    }
    
    -- Executor compatibility
    local protected = gethui and gethui() or game:GetService("CoreGui")
    
    -- Main ScreenGui
    local ScreenGui = Create("ScreenGui", {
        Name = "DarkLib",
        Parent = protected,
        ResetOnSpawn = false,
        ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    })
    
    -- Mobile scaling
    local UIScale = Create("UIScale", {
        Parent = ScreenGui,
        Scale = IsMobile() and 0.9 or 1
    })
    
    -- Main container
    local Main = Create("Frame", {
        Name = "Main",
        Parent = ScreenGui,
        Size = config.Size,
        Position = config.Position,
        AnchorPoint = Vector2.new(0.5, 0.5),
        BackgroundColor3 = self.Themes[config.Theme].Primary,
        BorderSizePixel = 0,
        ClipsDescendants = true
    })
    
    -- Drop shadow
    local Shadow = Create("ImageLabel", {
        Name = "Shadow",
        Parent = Main,
        Size = UDim2.fromScale(1, 1) + UDim2.fromOffset(20, 20),
        Position = UDim2.fromOffset(-10, -10),
        BackgroundTransparency = 1,
        Image = "rbxassetid://1316045217",
        ImageColor3 = Color3.fromRGB(0, 0, 0),
        ImageTransparency = 0.7,
        ScaleType = Enum.ScaleType.Slice,
        SliceCenter = Rect.new(10, 10, 118, 118)
    })
    
    -- Top bar
    local TopBar = Create("Frame", {
        Name = "TopBar",
        Parent = Main,
        Size = UDim2.new(1, 0, 0, 50),
        BackgroundColor3 = self.Themes[config.Theme].Secondary,
        BorderSizePixel = 0
    })
    
    local TitleLabel = Create("TextLabel", {
        Name = "Title",
        Parent = TopBar,
        Size = UDim2.new(1, -20, 0.5, 0),
        Position = UDim2.fromOffset(10, 5),
        BackgroundTransparency = 1,
        Text = config.Title,
        TextColor3 = self.Themes[config.Theme].Text,
        TextSize = 18,
        Font = Enum.Font.GothamBold,
        TextXAlignment = Enum.TextXAlignment.Left
    })
    
    local SubTitleLabel = Create("TextLabel", {
        Name = "SubTitle",
        Parent = TopBar,
        Size = UDim2.new(1, -20, 0.5, 0),
        Position = UDim2.fromOffset(10, 25),
        BackgroundTransparency = 1,
        Text = config.SubTitle,
        TextColor3 = self.Themes[config.Theme].SubText,
        TextSize = 12,
        Font = Enum.Font.Gotham,
        TextXAlignment = Enum.TextXAlignment.Left
    })
    
    -- Minimize button
    local MinimizeBtn = Create("TextButton", {
        Name = "MinimizeBtn",
        Parent = TopBar,
        Size = UDim2.fromOffset(30, 30),
        Position = UDim2.new(1, -35, 0.5, -15),
        BackgroundColor3 = self.Themes[config.Theme].Secondary,
        Text = "-",
        TextColor3 = self.Themes[config.Theme].Text,
        TextSize = 20,
        Font = Enum.Font.GothamBold,
        AutoButtonColor = false
    })
    
    local MinimizeCorner = Create("UICorner", {CornerRadius = UDim.new(0, 6), Parent = MinimizeBtn})
    
    -- Tab container
    local TabContainer = Create("Frame", {
        Name = "TabContainer",
        Parent = Main,
        Size = UDim2.new(0, config.TabWidth, 1, -50),
        Position = UDim2.fromOffset(0, 50),
        BackgroundColor3 = self.Themes[config.Theme].Primary,
        BorderSizePixel = 0
    })
    
    if IsMobile() then
        TabContainer.Size = UDim2.new(0, config.MobileTabWidth, 1, -50)
    end
    
    local TabList = Create("ScrollingFrame", {
        Name = "TabList",
        Parent = TabContainer,
        Size = UDim2.fromScale(1, 1),
        BackgroundTransparency = 1,
        BorderSizePixel = 0,
        ScrollBarThickness = 2,
        ScrollBarImageColor3 = self.Themes[config.Theme].Border,
        CanvasSize = UDim2.new(0, 0, 0, 0),
        AutomaticCanvasSize = Enum.AutomaticSize.Y
    })
    
    local TabListLayout = Create("UIListLayout", {
        Parent = TabList,
        SortOrder = Enum.SortOrder.LayoutOrder,
        Padding = UDim.new(0, 5)
    })
    
    -- Content container
    local ContentContainer = Create("Frame", {
        Name = "ContentContainer",
        Parent = Main,
        Size = UDim2.new(1, -config.TabWidth, 1, -50),
        Position = UDim2.fromOffset(config.TabWidth, 50),
        BackgroundColor3 = self.Themes[config.Theme].Primary,
        BorderSizePixel = 0
    })
    
    if IsMobile() then
        ContentContainer.Size = UDim2.new(1, -config.MobileTabWidth, 1, -50)
        ContentContainer.Position = UDim2.fromOffset(config.MobileTabWidth, 50)
    end
    
    local Content = Create("Frame", {
        Name = "Content",
        Parent = ContentContainer,
        Size = UDim2.fromScale(1, 1),
        BackgroundTransparency = 1,
        ClipsDescendants = true
    })
    
    -- State
    local state = {
        Minimized = false,
        Tabs = {},
        CurrentTab = nil,
        Options = {}
    }
    
    -- Minimize functionality
    local function ToggleMinimize()
        state.Minimized = not state.Minimized
        if state.Minimized then
            Tween(Main, {Size = UDim2.new(0, Main.Size.X.Offset, 0, 50)}, 0.3)
            MinimizeBtn.Text = "+"
        else
            Tween(Main, {Size = config.Size}, 0.3)
            MinimizeBtn.Text = "-"
        end
    end
    
    MinimizeBtn.MouseButton1Click:Connect(ToggleMinimize)
    UIS.InputBegan:Connect(function(input)
        if input.KeyCode == config.MinimizeKey and not UIS:GetFocusedTextBox() then
            ToggleMinimize()
        end
    end)
    
    -- Dragging
    local dragging, dragStart, startPos
    TopBar.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = true
            dragStart = input.Position
            startPos = Main.Position
        end
    end)
    
    UIS.InputChanged:Connect(function(input)
        if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
            local delta = input.Position - dragStart
            Main.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end
    end)
    
    UIS.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = false
        end
    end)
    
    -- Mobile auto-scale
    if IsMobile() then
        local function AutoScale()
            local viewportSize = workspace.CurrentCamera.ViewportSize
            local scale = math.min(viewportSize.X / 800, viewportSize.Y / 600)
            UIScale.Scale = math.clamp(scale * 0.9, 0.7, 1)
        end
        AutoScale()
        workspace.CurrentCamera:GetPropertyChangedSignal("ViewportSize"):Connect(AutoScale)
    end
    
    -- Window API
    local Window = {}
    
    function Window:AddTab(options)
        options = options or {}
        local tabConfig = {
            Title = options.Title or "Tab",
            Icon = options.Icon or ""
        }
        
        local TabButton = Create("TextButton", {
            Name = "TabButton",
            Parent = TabList,
            Size = UDim2.new(1, -10, 0, 40),
            Position = UDim2.fromOffset(5, 0),
            BackgroundColor3 = self.Themes[config.Theme].Primary,
            BorderSizePixel = 0,
            Text = tabConfig.Title,
            TextColor3 = self.Themes[config.Theme].SubText,
            TextSize = 14,
            Font = Enum.Font.GothamMedium,
            AutoButtonColor = false
        })
        
        local TabButtonCorner = Create("UICorner", {CornerRadius = UDim.new(0, 6), Parent = TabButton})
        
        local TabContent = Create("ScrollingFrame", {
            Name = "TabContent",
            Parent = Content,
            Size = UDim2.fromScale(1, 1),
            BackgroundTransparency = 1,
            BorderSizePixel = 0,
            ScrollBarThickness = 3,
            ScrollBarImageColor3 = self.Themes[config.Theme].Border,
            CanvasSize = UDim2.new(0, 0, 0, 0),
            AutomaticCanvasSize = Enum.AutomaticSize.Y,
            Visible = false
        })
        
        local TabContentLayout = Create("UIListLayout", {
            Parent = TabContent,
            SortOrder = Enum.SortOrder.LayoutOrder,
            Padding = UDim.new(0, 10)
        })
        
        TabContentLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
            TabContent.CanvasSize = UDim2.new(0, 0, 0, TabContentLayout.AbsoluteContentSize.Y + 20)
        end)
        
        -- Tab API
        local Tab = {}
        
        function Tab:AddParagraph(options)
            options = options or {}
            local paragraphConfig = {
                Title = options.Title or "Paragraph",
                Content = options.Content or ""
            }
            
            local Paragraph = Create("Frame", {
                Parent = TabContent,
                Size = UDim2.new(1, -20, 0, 60),
                BackgroundColor3 = self.Themes[config.Theme].Secondary,
                AutomaticSize = Enum.AutomaticSize.Y
            })
            
            local ParagraphCorner = Create("UICorner", {CornerRadius = UDim.new(0, 6), Parent = Paragraph})
            local ParagraphPadding = Create("UIPadding", {
                Parent = Paragraph,
                PaddingTop = UDim.new(0, 10),
                PaddingBottom = UDim.new(0, 10),
                PaddingLeft = UDim.new(0, 10),
                PaddingRight = UDim.new(0, 10)
            })
            
            local TitleLabel = Create("TextLabel", {
                Parent = Paragraph,
                Size = UDim2.new(1, 0, 0, 20),
                BackgroundTransparency = 1,
                Text = paragraphConfig.Title,
                TextColor3 = self.Themes[config.Theme].Text,
                TextSize = 16,
                Font = Enum.Font.GothamBold,
                TextXAlignment = Enum.TextXAlignment.Left
            })
            
            local ContentLabel = Create("TextLabel", {
                Parent = Paragraph,
                Size = UDim2.new(1, 0, 0, 20),
                Position = UDim2.fromOffset(0, 25),
                BackgroundTransparency = 1,
                Text = paragraphConfig.Content,
                TextColor3 = self.Themes[config.Theme].SubText,
                TextSize = 13,
                Font = Enum.Font.Gotham,
                TextXAlignment = Enum.TextXAlignment.Left,
                TextWrapped = true,
                AutomaticSize = Enum.AutomaticSize.Y
            })
            
            return Paragraph
        end
        
        function Tab:AddButton(options)
            options = options or {}
            local buttonConfig = {
                Title = options.Title or "Button",
                Description = options.Description or "",
                Callback = options.Callback or function() end
            }
            
            local Button = Create("TextButton", {
                Parent = TabContent,
                Size = UDim2.new(1, -20, 0, buttonConfig.Description ~= "" and 60 or 40),
                BackgroundColor3 = self.Themes[config.Theme].Secondary,
                BorderSizePixel = 0,
                Text = "",
                AutoButtonColor = false
            })
            
            local ButtonCorner = Create("UICorner", {CornerRadius = UDim.new(0, 6), Parent = Button})
            
            local ButtonTitle = Create("TextLabel", {
                Parent = Button,
                Size = UDim2.new(1, -20, 0, 20),
                Position = UDim2.fromOffset(10, 10),
                BackgroundTransparency = 1,
                Text = buttonConfig.Title,
                TextColor3 = self.Themes[config.Theme].Text,
                TextSize = 14,
                Font = Enum.Font.GothamMedium,
                TextXAlignment = Enum.TextXAlignment.Left
            })
            
            if buttonConfig.Description ~= "" then
                local ButtonDesc = Create("TextLabel", {
                    Parent = Button,
                    Size = UDim2.new(1, -20, 0, 15),
                    Position = UDim2.fromOffset(10, 30),
                    BackgroundTransparency = 1,
                    Text = buttonConfig.Description,
                    TextColor3 = self.Themes[config.Theme].SubText,
                    TextSize = 12,
                    Font = Enum.Font.Gotham,
                    TextXAlignment = Enum.TextXAlignment.Left
                })
            end
            
            Button.MouseEnter:Connect(function()
                Tween(Button, {BackgroundColor3 = self.Themes[config.Theme].Hover}, 0.2)
            end)
            
            Button.MouseLeave:Connect(function()
                Tween(Button, {BackgroundColor3 = self.Themes[config.Theme].Secondary}, 0.2)
            end)
            
            Button.MouseButton1Click:Connect(function()
                Tween(Button, {Size = UDim2.new(1, -20, 0, (buttonConfig.Description ~= "" and 58 or 38))}, 0.1)
                wait(0.1)
                Tween(Button, {Size = UDim2.new(1, -20, 0, (buttonConfig.Description ~= "" and 60 or 40))}, 0.1)
                buttonConfig.Callback()
            end)
            
            return Button
        end
        
        function Tab:AddToggle(flag, options)
            options = options or {}
            local toggleConfig = {
                Title = options.Title or "Toggle",
                Default = options.Default or false,
                Callback = options.Callback or function() end
            }
            
            local Toggle = Create("Frame", {
                Name = "Toggle",
                Parent = TabContent,
                Size = UDim2.new(1, -20, 0, 40),
                BackgroundColor3 = self.Themes[config.Theme].Secondary
            })
            
            local ToggleCorner = Create("UICorner", {CornerRadius = UDim.new(0, 6), Parent = Toggle})
            
            local ToggleTitle = Create("TextLabel", {
                Parent = Toggle,
                Size = UDim2.new(1, -60, 1, 0),
                Position = UDim2.fromOffset(10, 0),
                BackgroundTransparency = 1,
                Text = toggleConfig.Title,
                TextColor3 = self.Themes[config.Theme].Text,
                TextSize = 14,
                Font = Enum.Font.GothamMedium,
                TextXAlignment = Enum.TextXAlignment.Left
            })
            
            local ToggleButton = Create("TextButton", {
                Parent = Toggle,
                Size = UDim2.fromOffset(40, 20),
                Position = UDim2.new(1, -50, 0.5, -10),
                BackgroundColor3 = toggleConfig.Default and self.Themes[config.Theme].Accent or self.Themes[config.Theme].Border,
                BorderSizePixel = 0,
                Text = "",
                AutoButtonColor = false
            })
            
            local ToggleButtonCorner = Create("UICorner", {CornerRadius = UDim.new(0, 10), Parent = ToggleButton})
            
            local ToggleIndicator = Create("Frame", {
                Parent = ToggleButton,
                Size = UDim2.fromOffset(16, 16),
                Position = toggleConfig.Default and UDim2.new(1, -18, 0.5, -8) or UDim2.new(0, 2, 0.5, -8),
                BackgroundColor3 = Color3.fromRGB(255, 255, 255),
                BorderSizePixel = 0
            })
            
            local ToggleIndicatorCorner = Create("UICorner", {CornerRadius = UDim.new(0, 8), Parent = ToggleIndicator})
            
            local value = toggleConfig.Default
            state.Options[flag] = {Value = value, SetValue = function(self, newVal) value = newVal; updateToggle() end}
            
            local function updateToggle()
                Tween(ToggleButton, {BackgroundColor3 = value and self.Themes[config.Theme].Accent or self.Themes[config.Theme].Border}, 0.2)
                Tween(ToggleIndicator, {Position = value and UDim2.new(1, -18, 0.5, -8) or UDim2.new(0, 2, 0.5, -8)}, 0.2)
                toggleConfig.Callback(value)
            end
            
            ToggleButton.MouseButton1Click:Connect(function()
                value = not value
                updateToggle()
            end)
            
            if toggleConfig.Default then updateToggle() end
            
            return state.Options[flag]
        end
        
        function Tab:AddSlider(flag, options)
            options = options or {}
            local sliderConfig = {
                Title = options.Title or "Slider",
                Description = options.Description or "",
                Default = options.Default or 0,
                Min = options.Min or 0,
                Max = options.Max or 100,
                Rounding = options.Rounding or 0,
                Callback = options.Callback or function() end
            }
            
            local Slider = Create("Frame", {
                Parent = TabContent,
                Size = UDim2.new(1, -20, 0, sliderConfig.Description ~= "" and 80 or 60),
                BackgroundColor3 = self.Themes[config.Theme].Secondary,
                AutomaticSize = Enum.AutomaticSize.Y
            })
            
            local SliderCorner = Create("UICorner", {CornerRadius = UDim.new(0, 6), Parent = Slider})
            local SliderPadding = Create("UIPadding", {
                Parent = Slider,
                PaddingTop = UDim.new(0, 10),
                PaddingBottom = UDim.new(0, 10),
                PaddingLeft = UDim.new(0, 10),
                PaddingRight = UDim.new(0, 10)
            })
            
            local SliderTitle = Create("TextLabel", {
                Parent = Slider,
                Size = UDim2.new(1, 0, 0, 20),
                BackgroundTransparency = 1,
                Text = sliderConfig.Title,
                TextColor3 = self.Themes[config.Theme].Text,
                TextSize = 14,
                Font = Enum.Font.GothamMedium,
                TextXAlignment = Enum.TextXAlignment.Left
            })
            
            if sliderConfig.Description ~= "" then
                local SliderDesc = Create("TextLabel", {
                    Parent = Slider,
                    Size = UDim2.new(1, 0, 0, 15),
                    Position = UDim2.fromOffset(0, 20),
                    BackgroundTransparency = 1,
                    Text = sliderConfig.Description,
                    TextColor3 = self.Themes[config.Theme].SubText,
                    TextSize = 12,
                    Font = Enum.Font.Gotham,
                    TextXAlignment = Enum.TextXAlignment.Left
                })
            end
            
            local SliderTrack = Create("Frame", {
                Parent = Slider,
                Size = UDim2.new(1, -20, 0, 6),
                Position = UDim2.fromOffset(10, sliderConfig.Description ~= "" and 45 or 35),
                BackgroundColor3 = self.Themes[config.Theme].Border,
                BorderSizePixel = 0
            })
            
            local SliderTrackCorner = Create("UICorner", {CornerRadius = UDim.new(0, 3), Parent = SliderTrack})
            
            local SliderFill = Create("Frame", {
                Parent = SliderTrack,
                Size = UDim2.fromScale((sliderConfig.Default - sliderConfig.Min) / (sliderConfig.Max - sliderConfig.Min), 1),
                BackgroundColor3 = self.Themes[config.Theme].Accent,
                BorderSizePixel = 0
            })
            
            local SliderFillCorner = Create("UICorner", {CornerRadius = UDim.new(0, 3), Parent = SliderFill})
            
            local SliderThumb = Create("Frame", {
                Parent = SliderTrack,
                Size = UDim2.fromOffset(16, 16),
                Position = UDim2.new((sliderConfig.Default - sliderConfig.Min) / (sliderConfig.Max - sliderConfig.Min), -8, 0.5, -8),
                BackgroundColor3 = Color3.fromRGB(255, 255, 255),
                BorderSizePixel = 0
            })
            
            local SliderThumbCorner = Create("UICorner", {CornerRadius = UDim.new(0, 8), Parent = SliderThumb})
            
            local ValueLabel = Create("TextLabel", {
                Parent = Slider,
                Size = UDim2.new(0, 50, 0, 20),
                Position = UDim2.new(1, -50, 0, 0),
                BackgroundTransparency = 1,
                Text = tostring(sliderConfig.Default),
                TextColor3 = self.Themes[config.Theme].Text,
                TextSize = 14,
                Font = Enum.Font.GothamMedium,
                TextXAlignment = Enum.TextXAlignment.Right
            })
            
            local value = sliderConfig.Default
            state.Options[flag] = {Value = value, SetValue = function(self, newVal) value = math.clamp(newVal, sliderConfig.Min, sliderConfig.Max); updateSlider() end}
            
            local function updateSlider()
                local percentage = (value - sliderConfig.Min) / (sliderConfig.Max - sliderConfig.Min)
                SliderFill.Size = UDim2.fromScale(percentage, 1)
                SliderThumb.Position = UDim2.new(percentage, -8, 0.5, -8)
                ValueLabel.Text = tostring(value)
                sliderConfig.Callback(value)
            end
            
            local function setValueFromPosition(x)
                local relativeX = math.clamp((x - SliderTrack.AbsolutePosition.X) / SliderTrack.AbsoluteSize.X, 0, 1)
                value = sliderConfig.Min + (sliderConfig.Max - sliderConfig.Min) * relativeX
                if sliderConfig.Rounding > 0 then
                    value = math.round(value * (10 ^ sliderConfig.Rounding)) / (10 ^ sliderConfig.Rounding)
                else
                    value = math.round(value)
                end
                updateSlider()
            end
            
            SliderTrack.InputBegan:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
                    setValueFromPosition(input.Position.X)
                    local connection
                    connection = UIS.InputChanged:Connect(function(changed)
                        if changed.UserInputType == Enum.UserInputType.MouseMovement or changed.UserInputType == Enum.UserInputType.Touch then
                            setValueFromPosition(changed.Position.X)
                        end
                    end)
                    UIS.InputEnded:Connect(function(ended)
                        if ended.UserInputType == Enum.UserInputType.MouseButton1 or ended.UserInputType == Enum.UserInputType.Touch then
                            connection:Disconnect()
                        end
                    end)
                end
            end)
            
            updateSlider()
            
            return state.Options[flag]
        end
        
        function Tab:AddDropdown(flag, options)
            options = options or {}
            local dropdownConfig = {
                Title = options.Title or "Dropdown",
                Values = options.Values or {},
                Multi = options.Multi or false,
                Default = options.Default or (options.Multi and {} or options.Values[1]),
                Callback = options.Callback or function() end
            }
            
            local Dropdown = Create("Frame", {
                Parent = TabContent,
                Size = UDim2.new(1, -20, 0, 40),
                BackgroundColor3 = self.Themes[config.Theme].Secondary,
                AutomaticSize = Enum.AutomaticSize.Y
            })
            
            local DropdownCorner = Create("UICorner", {CornerRadius = UDim.new(0, 6), Parent = Dropdown})
            local DropdownPadding = Create("UIPadding", {
                Parent = Dropdown,
                PaddingTop = UDim.new(0, 10),
                PaddingBottom = UDim.new(0, 10),
                PaddingLeft = UDim.new(0, 10),
                PaddingRight = UDim.new(0, 10)
            })
            
            local DropdownTitle = Create("TextLabel", {
                Parent = Dropdown,
                Size = UDim2.new(1, -40, 0, 20),
                BackgroundTransparency = 1,
                Text = dropdownConfig.Title,
                TextColor3 = self.Themes[config.Theme].Text,
                TextSize = 14,
                Font = Enum.Font.GothamMedium,
                TextXAlignment = Enum.TextXAlignment.Left
            })
            
            local DropdownValue = Create("TextLabel", {
                Parent = Dropdown,
                Size = UDim2.new(1, -40, 0, 20),
                Position = UDim2.fromOffset(0, 25),
                BackgroundTransparency = 1,
                Text = dropdownConfig.Multi and "None" or (dropdownConfig.Default or "Select..."),
                TextColor3 = self.Themes[config.Theme].SubText,
                TextSize = 12,
                Font = Enum.Font.Gotham,
                TextXAlignment = Enum.TextXAlignment.Left
            })
            
            local DropdownArrow = Create("TextLabel", {
                Parent = Dropdown,
                Size = UDim2.fromOffset(20, 20),
                Position = UDim2.new(1, -30, 0.5, -10),
                BackgroundTransparency = 1,
                Text = "â–¼",
                TextColor3 = self.Themes[config.Theme].SubText,
                TextSize = 14,
                Font = Enum.Font.GothamBold
            })
            
            local DropdownList = Create("ScrollingFrame", {
                Parent = Dropdown,
                Size = UDim2.new(1, 0, 0, 0),
                Position = UDim2.fromOffset(0, 45),
                BackgroundColor3 = self.Themes[config.Theme].Secondary,
                BorderSizePixel = 0,
                ScrollBarThickness = 2,
                ScrollBarImageColor3 = self.Themes[config.Theme].Border,
                CanvasSize = UDim2.new(0, 0, 0, 0),
                AutomaticCanvasSize = Enum.AutomaticSize.Y,
                Visible = false,
                ZIndex = 2
            })
            
            local DropdownListLayout = Create("UIListLayout", {
                Parent = DropdownList,
                SortOrder = Enum.SortOrder.LayoutOrder
            })
            
            local value = dropdownConfig.Default
            state.Options[flag] = {Value = value, SetValue = function(self, newVal) value = newVal; updateDropdown() end}
            
            local function updateDropdown()
                if dropdownConfig.Multi then
                    local selected = {}
                    for val, state in pairs(value) do
                        if state then table.insert(selected, val) end
                    end
                    DropdownValue.Text = #selected > 0 and table.concat(selected, ", ") or "None"
                else
                    DropdownValue.Text = value or "Select..."
                end
                dropdownConfig.Callback(value)
            end
            
            local function createDropdownItem(val)
                local Item = Create("TextButton", {
                    Parent = DropdownList,
                    Size = UDim2.new(1, 0, 0, 35),
                    BackgroundColor3 = self.Themes[config.Theme].Secondary,
                    BorderSizePixel = 0,
                    Text = val,
                    TextColor3 = self.Themes[config.Theme].Text,
                    TextSize = 13,
                    Font = Enum.Font.Gotham,
                    AutoButtonColor = false,
                    ZIndex = 3
                })
                
                Item.MouseEnter:Connect(function()
                    Tween(Item, {BackgroundColor3 = self.Themes[config.Theme].Hover}, 0.2)
                end)
                
                Item.MouseLeave:Connect(function()
                    Tween(Item, {BackgroundColor3 = self.Themes[config.Theme].Secondary}, 0.2)
                end)
                
                Item.MouseButton1Click:Connect(function()
                    if dropdownConfig.Multi then
                        value[val] = not value[val]
                    else
                        value = val
                        DropdownList.Visible = false
                    end
                    updateDropdown()
                end)
                
                return Item
            end
            
            for _, val in ipairs(dropdownConfig.Values) do
                createDropdownItem(val)
            end
            
            Dropdown.InputBegan:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
                    DropdownList.Visible = not DropdownList.Visible
                    Tween(DropdownArrow, {Rotation = DropdownList.Visible and 180 or 0}, 0.2)
                end
            end)
            
            updateDropdown()
            
            return state.Options[flag]
        end
        
        function Tab:AddColorpicker(flag, options)
            options = options or {}
            local colorConfig = {
                Title = options.Title or "Colorpicker",
                Default = options.Default or Color3.fromRGB(255, 255, 255),
                Transparency = options.Transparency,
                Callback = options.Callback or function() end
            }
            
            local Colorpicker = Create("Frame", {
                Parent = TabContent,
                Size = UDim2.new(1, -20, 0, 40),
                BackgroundColor3 = self.Themes[config.Theme].Secondary
            })
            
            local ColorpickerCorner = Create("UICorner", {CornerRadius = UDim.new(0, 6), Parent = Colorpicker})
            
            local ColorpickerTitle = Create("TextLabel", {
                Parent = Colorpicker,
                Size = UDim2.new(1, -60, 1, 0),
                Position = UDim2.fromOffset(10, 0),
                BackgroundTransparency = 1,
                Text = colorConfig.Title,
                TextColor3 = self.Themes[config.Theme].Text,
                TextSize = 14,
                Font = Enum.Font.GothamMedium,
                TextXAlignment = Enum.TextXAlignment.Left
            })
            
            local ColorPreview = Create("Frame", {
                Parent = Colorpicker,
                Size = UDim2.fromOffset(30, 30),
                Position = UDim2.new(1, -40, 0.5, -15),
                BackgroundColor3 = colorConfig.Default,
                BorderSizePixel = 0
            })
            
            local ColorPreviewCorner = Create("UICorner", {CornerRadius = UDim.new(0, 6), Parent = ColorPreview})
            
            local value = {Color = colorConfig.Default, Transparency = colorConfig.Transparency or 0}
            state.Options[flag] = {Value = value, SetValue = function(self, newVal) value = newVal; updateColorpicker() end}
            
            local function updateColorpicker()
                ColorPreview.BackgroundColor3 = value.Color
                if colorConfig.Transparency then
                    ColorPreview.BackgroundTransparency = value.Transparency
                end
                colorConfig.Callback(value)
            end
            
            Colorpicker.InputBegan:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
                    -- Simple color picker (would need more complex implementation for full picker)
                    local success, newColor = pcall(function()
                        return Color3.fromHSV(math.random(), 1, 1) -- Placeholder
                    end)
                    if success then
                        value.Color = newColor
                        updateColorpicker()
                    end
                end
            end)
            
            updateColorpicker()
            
            return state.Options[flag]
        end
        
        function Tab:AddKeybind(flag, options)
            options = options or {}
            local keybindConfig = {
                Title = options.Title or "Keybind",
                Mode = options.Mode or "Toggle", -- Always, Toggle, Hold
                Default = options.Default or "LeftControl",
                Callback = options.Callback or function() end,
                ChangedCallback = options.ChangedCallback or function() end
            }
            
            local Keybind = Create("Frame", {
                Parent = TabContent,
                Size = UDim2.new(1, -20, 0, 40),
                BackgroundColor3 = self.Themes[config.Theme].Secondary
            })
            
            local KeybindCorner = Create("UICorner", {CornerRadius = UDim.new(0, 6), Parent = Keybind})
            
            local KeybindTitle = Create("TextLabel", {
                Parent = Keybind,
                Size = UDim2.new(1, -100, 1, 0),
                Position = UDim2.fromOffset(10, 0),
                BackgroundTransparency = 1,
                Text = keybindConfig.Title,
                TextColor3 = self.Themes[config.Theme].Text,
                TextSize = 14,
                Font = Enum.Font.GothamMedium,
                TextXAlignment = Enum.TextXAlignment.Left
            })
            
            local KeybindButton = Create("TextButton", {
                Parent = Keybind,
                Size = UDim2.fromOffset(80, 30),
                Position = UDim2.new(1, -85, 0.5, -15),
                BackgroundColor3 = self.Themes[config.Theme].Primary,
                BorderSizePixel = 0,
                Text = keybindConfig.Default,
                TextColor3 = self.Themes[config.Theme].Text,
                TextSize = 12,
                Font = Enum.Font.GothamMedium,
                AutoButtonColor = false
            })
            
            local KeybindButtonCorner = Create("UICorner", {CornerRadius = UDim.new(0, 4), Parent = KeybindButton})
            
            local value = {Key = keybindConfig.Default, Mode = keybindConfig.Mode, State = false}
            state.Options[flag] = {
                Value = value,
                SetValue = function(self, newKey, newMode) 
                    value.Key = newKey 
                    value.Mode = newMode or value.Mode
                    KeybindButton.Text = tostring(newKey)
                end,
                GetState = function() return value.State end
            }
            
            local listening = false
            
            KeybindButton.MouseButton1Click:Connect(function()
                listening = true
                KeybindButton.Text = "..."
                KeybindButton.BackgroundColor3 = self.Themes[config.Theme].Accent
            end)
            
            UIS.InputBegan:Connect(function(input)
                if listening then
                    local keyName = input.KeyCode.Name ~= "Unknown" and input.KeyCode.Name or input.UserInputType.Name
                    value.Key = keyName
                    KeybindButton.Text = keyName
                    listening = false
                    KeybindButton.BackgroundColor3 = self.Themes[config.Theme].Primary
                    keybindConfig.ChangedCallback(keyName)
                elseif input.KeyCode.Name == value.Key or input.UserInputType.Name == value.Key then
                    if value.Mode == "Toggle" then
                        value.State = not value.State
                        keybindConfig.Callback(value.State)
                    elseif value.Mode == "Hold" then
                        value.State = true
                        keybindConfig.Callback(value.State)
                    end
                end
            end)
            
            UIS.InputEnded:Connect(function(input)
                if value.Mode == "Hold" and (input.KeyCode.Name == value.Key or input.UserInputType.Name == value.Key) then
                    value.State = false
                    keybindConfig.Callback(value.State)
                end
            end)
            
            return state.Options[flag]
        end
        
        function Tab:AddInput(flag, options)
            options = options or {}
            local inputConfig = {
                Title = options.Title or "Input",
                Default = options.Default or "",
                Placeholder = options.Placeholder or "",
                Numeric = options.Numeric or false,
                Finished = options.Finished or false,
                Callback = options.Callback or function() end
            }
            
            local Input = Create("Frame", {
                Parent = TabContent,
                Size = UDim2.new(1, -20, 0, 40),
                BackgroundColor3 = self.Themes[config.Theme].Secondary
            })
            
            local InputCorner = Create("UICorner", {CornerRadius = UDim.new(0, 6), Parent = Input})
            
            local InputTitle = Create("TextLabel", {
                Parent = Input,
                Size = UDim2.new(1, -10, 0, 20),
                Position = UDim2.fromOffset(10, 0),
                BackgroundTransparency = 1,
                Text = inputConfig.Title,
                TextColor3 = self.Themes[config.Theme].Text,
                TextSize = 14,
                Font = Enum.Font.GothamMedium,
                TextXAlignment = Enum.TextXAlignment.Left
            })
            
            local InputBox = Create("TextBox", {
                Parent = Input,
                Size = UDim2.new(1, -20, 0, 25),
                Position = UDim2.fromOffset(10, 25),
                BackgroundColor3 = self.Themes[config.Theme].Primary,
                BorderSizePixel = 0,
                Text = inputConfig.Default,
                PlaceholderText = inputConfig.Placeholder,
                TextColor3 = self.Themes[config.Theme].Text,
                PlaceholderColor3 = self.Themes[config.Theme].SubText,
                TextSize = 13,
                Font = Enum.Font.Gotham,
                ClearTextOnFocus = false
            })
            
            local InputBoxCorner = Create("UICorner", {CornerRadius = UDim.new(0, 4), Parent = InputBox})
            
            local value = inputConfig.Default
            state.Options[flag] = {Value = value, SetValue = function(self, newVal) InputBox.Text = newVal; value = newVal end}
            
            if inputConfig.Numeric then
                InputBox:GetPropertyChangedSignal("Text"):Connect(function()
                    InputBox.Text = InputBox.Text:gsub("[^%d%.%-]", "")
                end)
            end
            
            InputBox.FocusLost:Connect(function(enterPressed)
                value = InputBox.Text
                if not inputConfig.Finished or (inputConfig.Finished and enterPressed) then
                    inputConfig.Callback(value)
                end
            end)
            
            return state.Options[flag]
        end
        
        -- Tab switching
        TabButton.MouseButton1Click:Connect(function()
            Window:SelectTab(tabConfig.Title)
        end)
        
        state.Tabs[tabConfig.Title] = {
            Button = TabButton,
            Content = TabContent,
            Instance = Tab
        }
        
        if not state.CurrentTab then
            Window:SelectTab(tabConfig.Title)
        end
        
        return Tab
    end
    
    function Window:SelectTab(tabName)
        if state.CurrentTab then
            state.Tabs[state.CurrentTab].Content.Visible = false
            state.Tabs[state.CurrentTab].Button.BackgroundColor3 = self.Themes[config.Theme].Primary
            state.Tabs[state.CurrentTab].Button.TextColor3 = self.Themes[config.Theme].SubText
        end
        
        state.CurrentTab = tabName
        state.Tabs[tabName].Content.Visible = true
        Tween(state.Tabs[tabName].Button, {BackgroundColor3 = self.Themes[config.Theme].Accent}, 0.2)
        Tween(state.Tabs[tabName].Button, {TextColor3 = self.Themes[config.Theme].Text}, 0.2)
    end
    
    function Window:Notify(options)
        options = options or {}
        local notifyConfig = {
            Title = options.Title or "Notification",
            Content = options.Content or "",
            SubContent = options.SubContent or "",
            Duration = options.Duration or 5
        }
        
        local Notification = Create("Frame", {
            Parent = ScreenGui,
            Size = UDim2.fromOffset(300, 80),
            Position = UDim2.new(1, 10, 1, -90),
            BackgroundColor3 = self.Themes[config.Theme].Secondary,
            BorderSizePixel = 0
        })
        
        local NotificationCorner = Create("UICorner", {CornerRadius = UDim.new(0, 6), Parent = Notification})
        
        local NotificationTitle = Create("TextLabel", {
            Parent = Notification,
            Size = UDim2.new(1, -20, 0, 20),
            Position = UDim2.fromOffset(10, 10),
            BackgroundTransparency = 1,
            Text = notifyConfig.Title,
            TextColor3 = self.Themes[config.Theme].Text,
            TextSize = 14,
            Font = Enum.Font.GothamBold,
            TextXAlignment = Enum.TextXAlignment.Left
        })
        
        local NotificationContent = Create("TextLabel", {
            Parent = Notification,
            Size = UDim2.new(1, -20, 0, 15),
            Position = UDim2.fromOffset(10, 35),
            BackgroundTransparency = 1,
            Text = notifyConfig.Content,
            TextColor3 = self.Themes[config.Theme].SubText,
            TextSize = 12,
            Font = Enum.Font.Gotham,
            TextXAlignment = Enum.TextXAlignment.Left,
            TextWrapped = true
        })
        
        if notifyConfig.SubContent ~= "" then
            local NotificationSub = Create("TextLabel", {
                Parent = Notification,
                Size = UDim2.new(1, -20, 0, 15),
                Position = UDim2.fromOffset(10, 55),
                BackgroundTransparency = 1,
                Text = notifyConfig.SubContent,
                TextColor3 = self.Themes[config.Theme].SubText,
                TextSize = 11,
                Font = Enum.Font.Gotham,
                TextXAlignment = Enum.TextXAlignment.Left
            })
        end
        
        Tween(Notification, {Position = UDim2.new(1, -310, 1, -90)}, 0.3)
        
        if notifyConfig.Duration then
            delay(notifyConfig.Duration, function()
                Tween(Notification, {Position = UDim2.new(1, 10, 1, -90)}, 0.3).Completed:Connect(function()
                    Notification:Destroy()
                end)
            end)
        end
        
        return Notification
    end
    
    function Window:Dialog(options)
        options = options or {}
        local dialogConfig = {
            Title = options.Title or "Dialog",
            Content = options.Content or "",
            Buttons = options.Buttons or {}
        }
        
        local DialogOverlay = Create("Frame", {
            Parent = ScreenGui,
            Size = UDim2.fromScale(1, 1),
            BackgroundColor3 = Color3.fromRGB(0, 0, 0),
            BackgroundTransparency = 0.5,
            ZIndex = 10
        })
        
        local Dialog = Create("Frame", {
            Parent = DialogOverlay,
            Size = UDim2.fromOffset(400, 150),
            Position = UDim2.fromScale(0.5, 0.5),
            AnchorPoint = Vector2.new(0.5, 0.5),
            BackgroundColor3 = self.Themes[config.Theme].Secondary,
            ZIndex = 11
        })
        
        local DialogCorner = Create("UICorner", {CornerRadius = UDim.new(0, 8), Parent = Dialog})
        
        local DialogTitle = Create("TextLabel", {
            Parent = Dialog,
            Size = UDim2.new(1, -20, 0, 30),
            Position = UDim2.fromOffset(10, 10),
            BackgroundTransparency = 1,
            Text = dialogConfig.Title,
            TextColor3 = self.Themes[config.Theme].Text,
            TextSize = 16,
            Font = Enum.Font.GothamBold,
            TextXAlignment = Enum.TextXAlignment.Left,
            ZIndex = 12
        })
        
        local DialogContent = Create("TextLabel", {
            Parent = Dialog,
            Size = UDim2.new(1, -20, 0, 40),
            Position = UDim2.fromOffset(10, 45),
            BackgroundTransparency = 1,
            Text = dialogConfig.Content,
            TextColor3 = self.Themes[config.Theme].SubText,
            TextSize = 13,
            Font = Enum.Font.Gotham,
            TextWrapped = true,
            ZIndex = 12
        })
        
        local ButtonContainer = Create("Frame", {
            Parent = Dialog,
            Size = UDim2.new(1, -20, 0, 35),
            Position = UDim2.new(0, 10, 1, -45),
            BackgroundTransparency = 1,
            ZIndex = 12
        })
        
        local ButtonLayout = Create("UIListLayout", {
            Parent = ButtonContainer,
            FillDirection = Enum.FillDirection.Horizontal,
            HorizontalAlignment = Enum.HorizontalAlignment.Right,
            Padding = UDim.new(0, 10)
        })
        
        for _, btnData in ipairs(dialogConfig.Buttons) do
            local Button = Create("TextButton", {
                Parent = ButtonContainer,
                Size = UDim2.fromOffset(80, 35),
                BackgroundColor3 = self.Themes[config.Theme].Accent,
                BorderSizePixel = 0,
                Text = btnData.Title or "OK",
                TextColor3 = Color3.fromRGB(255, 255, 255),
                TextSize = 13,
                Font = Enum.Font.GothamMedium,
                AutoButtonColor = false,
                ZIndex = 12
            })
            
            local ButtonCorner = Create("UICorner", {CornerRadius = UDim.new(0, 4), Parent = Button})
            
            Button.MouseButton1Click:Connect(function()
                if btnData.Callback then btnData.Callback() end
                DialogOverlay:Destroy()
            end)
        end
        
        return DialogOverlay
    end
    
    function Window:SetTheme(themeName)
        if self.Themes[themeName] then
            config.Theme = themeName
            -- Update all colors (simplified)
            Main.BackgroundColor3 = self.Themes[themeName].Primary
            TopBar.BackgroundColor3 = self.Themes[themeName].Secondary
            TabContainer.BackgroundColor3 = self.Themes[themeName].Primary
            ContentContainer.BackgroundColor3 = self.Themes[themeName].Primary
        end
    end
    
    -- Expose options
    Window.Options = state.Options
    
    return Window
end

-- Save Manager Addon
function DarkLib:CreateSaveManager(options)
    options = options or {}
    local saveConfig = {
        Folder = options.Folder or "DarkLib",
        IgnoreIndexes = options.IgnoreIndexes or {}
    }
    
    local SaveManager = {}
    
    function SaveManager:SetLibrary(lib)
        self.Library = lib
    end
    
    function SaveManager:IgnoreThemeSettings()
        table.insert(saveConfig.IgnoreIndexes, "Theme")
    end
    
    function SaveManager:SetIgnoreIndexes(indexes)
        for _, index in ipairs(indexes) do
            table.insert(saveConfig.IgnoreIndexes, index)
        end
    end
    
    function SaveManager:SetFolder(folder)
        saveConfig.Folder = folder
    end
    
    function SaveManager:Save(name)
        if not self.Library then return end
        
        local data = {}
        for flag, option in pairs(self.Library.Options) do
            local shouldIgnore = false
            for _, ignore in ipairs(saveConfig.IgnoreIndexes) do
                if flag:find(ignore) then
                    shouldIgnore = true
                    break
                end
            end
            if not shouldIgnore then
                data[flag] = option.Value
            end
        end
        
        local json = HttpService:JSONEncode(data)
        if writefile then
            writefile(saveConfig.Folder .. "/" .. name .. ".json", json)
        end
    end
    
    function SaveManager:Load(name)
        if not self.Library then return end
        
        if readfile and isfile and isfile(saveConfig.Folder .. "/" .. name .. ".json") then
            local success, data = pcall(function()
                return HttpService:JSONDecode(readfile(saveConfig.Folder .. "/" .. name .. ".json"))
            end)
            
            if success and data then
                for flag, value in pairs(data) do
                    if self.Library.Options[flag] and self.Library.Options[flag].SetValue then
                        self.Library.Options[flag]:SetValue(value)
                    end
                end
            end
        end
    end
    
    function SaveManager:GetConfigs()
        local configs = {}
        if listfiles then
            for _, file in ipairs(listfiles(saveConfig.Folder)) do
                if file:find("%.json$") then
                    table.insert(configs, file:match("([^/\\]+)%.json$"))
                end
            end
        end
        return configs
    end
    
    function SaveManager:BuildConfigSection(tab)
        local Section = tab:AddParagraph({Title = "Configuration", Content = "Save and load your settings"})
        
        local ConfigName = tab:AddInput("ConfigNameInput", {
            Title = "Config Name",
            Placeholder = "Enter config name..."
        })
        
        local SaveButton = tab:AddButton({
            Title = "Save Config",
            Callback = function()
                if ConfigName.Value and ConfigName.Value ~= "" then
                    self:Save(ConfigName.Value)
                    self:RefreshConfigList()
                end
            end
        })
        
        local LoadButton = tab:AddButton({
            Title = "Load Config",
            Callback = function()
                if self.SelectedConfig then
                    self:Load(self.SelectedConfig)
                end
            end
        })
        
        local DeleteButton = tab:AddButton({
            Title = "Delete Config",
            Callback = function()
                if self.SelectedConfig and writefile then
                    delfile(saveConfig.Folder .. "/" .. self.SelectedConfig .. ".json")
                    self:RefreshConfigList()
                end
            end
        })
        
        local ConfigDropdown = tab:AddDropdown("ConfigDropdown", {
            Title = "Select Config",
            Values = self:GetConfigs(),
            Multi = false
        })
        
        ConfigDropdown:OnChanged(function(Value)
            self.SelectedConfig = Value
        end)
        
        function SaveManager:RefreshConfigList()
            ConfigDropdown.Values = self:GetConfigs()
            ConfigDropdown:SetValue("")
        end
        
        if not isfolder(saveConfig.Folder) then
            makefolder(saveConfig.Folder)
        end
    end
    
    function SaveManager:LoadAutoloadConfig()
        self:Load("autoload")
    end
    
    return SaveManager
end

-- Interface Manager Addon
function DarkLib:CreateInterfaceManager(options)
    options = options or {}
    local interfaceConfig = {
        Folder = options.Folder or "DarkLib"
    }
    
    local InterfaceManager = {}
    
    function InterfaceManager:SetLibrary(lib)
        self.Library = lib
    end
    
    function InterfaceManager:SetFolder(folder)
        interfaceConfig.Folder = folder
    end
    
    function InterfaceManager:BuildInterfaceSection(tab)
        local Section = tab:AddParagraph({Title = "UI Settings", Content = "Customize your interface"})
        
        local ScaleSlider = tab:AddSlider("UIScaleSlider", {
            Title = "UI Scale",
            Description = "Adjust the interface size",
            Default = 1,
            Min = 0.5,
            Max = 1.5,
            Rounding = 2,
            Callback = function(Value)
                if self.Library.Main then
                    self.Library.Main.UIScale.Scale = Value
                end
            end
        })
        
        local ResetButton = tab:AddButton({
            Title = "Reset Position",
            Callback = function()
                if self.Library.Main then
                    Tween(self.Library.Main, {Position = UDim2.fromScale(0.5, 0.5)}, 0.3)
                end
            end
        })
        
        local UnloadButton = tab:AddButton({
            Title = "Unload UI",
            Callback = function()
                if self.Library.ScreenGui then
                    self.Library.ScreenGui:Destroy()
                end
            end
        })
    end
    
    return InterfaceManager
end

return DarkLib
